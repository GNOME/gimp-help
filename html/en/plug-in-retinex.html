<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>8.46. Retinex</title>
    <link rel="stylesheet" href="gimp-help-plain.css" type="text/css" />
    <link rel="stylesheet" href="gimp-help-screen.css" type="text/css" />
    <link rel="stylesheet" href="gimp-help-custom.css" type="text/css" />
    <link rel="alternate stylesheet" href="gimp22.css" type="text/css" title="gimp22" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.78.0" />
    <link rel="home" href="index.html" title="GNU Image Manipulation Program" />
    <link rel="up" href="gimp-colors-menu.html" title="8. The “Colors” Menu" />
    <link rel="prev" href="gimp-filter-stress.html" title="8.45. Stress" />
    <link rel="next" href="gimp-colors-info-menu.html" title="8.47. The “Info” Submenu" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">8.46. Retinex</th>
        </tr>
        <tr>
          <td width="20%" align="left">
            <a accesskey="p" href="gimp-filter-stress.html">
              <img src="images/prev.png" alt="Prev" />
            </a>
          </td>
          <th width="60%" align="center">8. The <span class="quote">“<span class="quote">Colors</span>”</span> Menu</th>
          <td width="20%" align="right"> <a accesskey="n" href="gimp-colors-info-menu.html"><img src="images/next.png" alt="Next" /></a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="sect2">
      <div class="titlepage">
        <div>
          <div>
            <h3 class="title"><a id="plug-in-retinex"></a>8.46. Retinex</h3>
          </div>
        </div>
      </div>
      <a id="idm139754648975632" class="indexterm"></a>
      <a id="idm139754649732496" class="indexterm"></a>
      <div class="sect3">
        <div class="titlepage">
          <div>
            <div>
              <h4 class="title"><a id="idm139754660757872"></a>8.46.1. Overview</h4>
            </div>
          </div>
        </div>
        <div class="figure">
          <a id="idm139754654792928"></a>
          <p class="title">
            <strong>Figure 16.218. <span class="quote">“<span class="quote">Retinex</span>”</span> example</strong>
          </p>
          <div class="figure-contents">
            <div class="mediaobject">
              <img src="images/filters/examples/colors-retinex1.png" alt="“Retinex” example" />
              <div class="caption">
                <p>Original image</p>
              </div>
            </div>
            <div class="mediaobject">
              <img src="images/filters/examples/colors-retinex2.png" alt="“Retinex” example" />
              <div class="caption">
                <p>
            <span class="quote">“<span class="quote">Retinex</span>”</span> filter applied.
            Note new details in the upper right corner.
          </p>
              </div>
            </div>
          </div>
        </div>
        <br class="figure-break" />
        <p>
      Retinex improves visual rendering of an image when lighting conditions
      are not good. While our eye can see colors correctly when light is low,
      cameras and video cams can't manage this well. The MSRCR (MultiScale
      Retinex with Color Restoration) algorithm, which is at the root of the
      Retinex filter, is inspired by the eye biological mechanisms to adapt
      itself to these conditions. Retinex stands for Retina + cortex.
    </p>
        <p>
      Besides digital photography, Retinex algorithm is used to make the
      information in astronomical photos visible and detect, in medicine,
      poorly visible structures in X-rays or scanners.
    </p>
      </div>
      <div class="sect3">
        <div class="titlepage">
          <div>
            <div>
              <h4 class="title"><a id="idm139754654927120"></a>8.46.2. Activate the filter</h4>
            </div>
          </div>
        </div>
        <p>
      This filter is found in the image window menu under
      <span class="guimenu">Colors</span> → <span class="guisubmenu">Tone Mapping</span> → <span class="guimenuitem">Retinex…</span>.
    </p>
      </div>
      <div class="sect3">
        <div class="titlepage">
          <div>
            <div>
              <h4 class="title"><a id="idm139754655942352"></a>8.46.3. Options</h4>
            </div>
          </div>
        </div>
        <div class="figure">
          <a id="idm139754648949200"></a>
          <p class="title">
            <strong>Figure 16.219. <span class="quote">“<span class="quote">Retinex</span>”</span> filter options</strong>
          </p>
          <div class="figure-contents">
            <div class="mediaobject">
              <img src="images/menus/colors/retinex.png" alt="“Retinex” filter options" />
            </div>
          </div>
        </div>
        <br class="figure-break" />
        <p>
      These options call for notions that only mathematicians and imagery
      engineers can understand. In actual practice, the user has to grope
      about for the best setting. However, the following explanations should
      help out the experimented GIMP user.
    </p>
        <div class="variablelist">
          <dl class="variablelist">
            <dt>
              <span class="term">Level</span>
            </dt>
            <dd>
              <p>
            Here is what the plug-in author writes on his site
            <a class="xref" href="bibliography.html#bibliography-online-plugin-retinex" title="A plugin providing the Retinex algorithm for GIMP">[<abbr class="abbrev">PLUGIN-RETINEX</abbr>]</a>:
            <span class="quote">“<span class="quote">To characterize color variations and the lightor, we make
             a difference between (gaussian) filters responses at different
             scales. These parameters allow to specify how to allocate scale
             values between min scale (sigma 2.0) and max (sigma equal to the
             image size)</span>”</span>...
          </p>
              <div class="variablelist">
                <dl class="variablelist">
                  <dt>
                    <span class="term">Uniform</span>
                  </dt>
                  <dd>
                    <p>
                  Uniform tends to treat both low and high intensity areas
                  fairly.
                </p>
                  </dd>
                  <dt>
                    <span class="term">Low</span>
                  </dt>
                  <dd>
                    <p>
                  As a rule of thumb, low does <span class="quote">“<span class="quote">flare up</span>”</span>
                  the lower intensity areas on the image.
                </p>
                  </dd>
                  <dt>
                    <span class="term">High</span>
                  </dt>
                  <dd>
                    <p>
                  High tends to <span class="quote">“<span class="quote">bury</span>”</span> the lower intensity
                  areas in favor of a better rendering of the clearer areas
                  of the image.
                </p>
                  </dd>
                </dl>
              </div>
            </dd>
            <dt>
              <span class="term">Scale</span>
            </dt>
            <dd>
              <p>
            Determines the depth of the Retinex scale. Minimum value is 16, a
            value providing gross, unrefined filtering. Maximum value is 250.
            Optimal and default value is 240.
          </p>
            </dd>
            <dt>
              <span class="term">Scale division</span>
            </dt>
            <dd>
              <p>
            Determines the number of iterations in the multiscale Retinex
            filter. The minimum required, and the recommended value is three.
            Only one or two scale divisions removes the multiscale aspect and
            falls back to a single scale Retinex filtering. A value that is
            too high tends to introduce noise in the picture.
          </p>
            </dd>
            <dt>
              <span class="term">Dynamic</span>
            </dt>
            <dd>
              <p>
            As the MSR algorithm tends to make the image lighter, this slider
            allows you to adjust color saturation contamination around the
            new average color. A higher value means less color saturation.
            This is definitely the parameter you want to tweak for optimal
            results, because its effect is extremely image-dependent.
          </p>
            </dd>
          </dl>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="gimp-filter-stress.html"><img src="images/prev.png" alt="Prev" /></a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="gimp-colors-menu.html">
              <img src="images/up.png" alt="Up" />
            </a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="gimp-colors-info-menu.html"><img src="images/next.png" alt="Next" /></a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top"><a accesskey="p" href="gimp-filter-stress.html">8.45. Stress</a> </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">
              <img src="images/home.png" alt="Home" />
            </a>
          </td>
          <td width="40%" align="right" valign="top"> <a accesskey="n" href="gimp-colors-info-menu.html">8.47. The <span class="quote">“<span class="quote">Info</span>”</span> Submenu</a></td>
        </tr>
      </table>
      <a href="https://gitlab.gnome.org/GNOME/gimp-help/issues" class="reportbug">
      Report an error in the bug tracker
    </a>
    </div>
  </body>
</html>
