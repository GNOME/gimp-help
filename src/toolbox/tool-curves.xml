<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE sect2 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.docbook.org/xml/4.5/docbookx.dtd">
<!-- section history:
  2008-02-03 ude: updated 'de'
  2008-01-23 j.h updated 'en;fr' to v2.4
  2007-06-06 kost: added 'no'
  2007-05-20 lexa: enhanced docbook compliance
  2007-04-15 Added Spanish translation by AntI
  2005-12-07 replaced <simplesect> by <sect3> by lexa
  2005-12-01 informalfigure replaced by figure by lexa
  2005-08-08 de reviewed by axel.wernicke
-->
<sect2 id="gimp-tool-curves">
  <sect2info role="cvs">
    <revhistory>
      <revision>
        <revnumber>$Revision$</revnumber>
        <date>2008-01-23</date>
        <authorinitials>j.h</authorinitials>
      </revision>
      
      
      
      
      
    </revhistory>
  </sect2info>

  <title>
    <phrase>Curves</phrase>
    
    
    
    
    
    
    
    
    
  </title>

  <indexterm significance="normal">
    <primary>Tools</primary><secondary>Curves</secondary>
  </indexterm>
  <indexterm significance="normal"><primary>Curves</primary></indexterm>

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  <para>
    The Curves tool is the most sophisticated tool for changing the color,
    brightness, contrast or transparency of the active layer or a selection.
    While the Levels tool allows you to work on Shadows and Highlights, the
    Curves tool allows you to work on any tonal range. It works on RGB
    images.
  </para>
  
  
  
  
  
  
  
  
  

  <sect3>
    <title>
      <phrase>Activate the Tool</phrase>
      
      
      
      
      
      
      
      
      
    </title>

    <para>You can get to this tools in several ways :</para>
    
    
    
    
    
    

    <itemizedlist>
      <!--TODO es;it;pl v2.4-->
      <listitem>
        
        <para>
          In the image menu through
          <menuchoice moreinfo="none">
            <guimenu moreinfo="none">Tools</guimenu>
            <guisubmenu moreinfo="none">Color Tools</guisubmenu>
            <guimenuitem moreinfo="none">Curves</guimenuitem>
          </menuchoice> or
          <menuchoice moreinfo="none">
            <guimenu moreinfo="none">Colors</guimenu>
            <guimenuitem moreinfo="none">Curves</guimenuitem>
          </menuchoice>.
        </para>
        
        
        
        
        
        
        
        
      </listitem>

      

      <listitem>
        <para>
          By clicking on the tool icon
          <guiicon moreinfo="none">
            <inlinemediaobject>
              <imageobject>
                <imagedata fileref="../images/toolbox/stock-tool-curves-22.png"/>
              </imageobject>
            </inlinemediaobject>
          </guiicon>
          in Toolbox, if this tool has been installed there (see
          <link linkend="gimp-tools-dialog">Tools dialog</link>.
        </para>
        
        
        
        
        
        
      </listitem>
    </itemizedlist>
  </sect3>


  <sect3>
    <title>
      <phrase>
        <quote>Adjust Color Curves</quote> options
      </phrase>
      
      
      
      
      
      
      
      
      
    </title>

    <figure float="0">
      <title>
        <phrase>
          The <quote>Adjust Color Curves</quote> dialog
        </phrase>
        
        
        
        
        
        
        
        
      </title>

      <mediaobject>
        <imageobject>
          <imagedata fileref="../images/toolbox/tools-curves.png" format="PNG"/>
        </imageobject>
        
        
        
        
        
      </mediaobject>
    </figure>

    <variablelist>
      <varlistentry>
        <term>Channel</term>
        
        
        
        
        
        
        
        
        

        <listitem>
          <para><!--Changed 2008-01-23-->
            There are five options:
          </para>
          
          
          
          
          
          
          
          
          

          
          <!-- the following list is equivalent to the list above, just
               a different (more appropriate?) layout-->
          <variablelist>
            <varlistentry>
              <term>
                <phrase>Value</phrase>
                
                
                
              </term>
              <listitem>
                <para>
                  The curve represents the Value, i.e the brightness of
                  pixels as you can see them in the composite image.
                </para>
                
                
                
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>
                <phrase>Red; Green; Blue</phrase>
                
                
                
              </term>
              <listitem>
                <para>
                  The curve represents the quantity of color in each of the
                  three RGB channels. Here, <emphasis>dark</emphasis> means
                  <emphasis>little</emphasis> of the color.
                  <emphasis>Light</emphasis> means <emphasis>a lot</emphasis>
                  of the color.
                </para>
                
                
                
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>
                <phrase>Alpha</phrase>
                
              </term>
              <listitem>
                <para>
                  The curve represents the opacity of the pixels.
                  <emphasis>Dark</emphasis> means
                  <emphasis>very transparent</emphasis>.
                  <emphasis>Light</emphasis> means <emphasis>very
                  opaque</emphasis>. Your image must have an Alpha channel
                  for this option to be enabled.
                </para>
                
                
                
              </listitem>
            </varlistentry>
          </variablelist>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Reset Channel</term>
        
        
        
        
        
        
        
        
        

        <listitem>
          <para>
            This button deletes all changes made to the selected channel and
            returns to default values.
          </para>
          
          
          
          
          
          
          
          
          
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Linear and Logarithmic buttons</term>
        
        
        
        
        
        
        
        

        <listitem>
          <para>
            These buttons allow to choose the Linear or Logarithmic type of
            the histogram. You can also use the same options in Tool Options
            dialog.
          </para>
          
          
          
          
          
          
          
          
          
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Main Editing Area</term>
        
        
        
        
        
        
        
        
        

        <listitem>
          <!--TODO es;it;pl;-->
          <itemizedlist>
            <listitem>
              <para>
                <emphasis>The vertical gradient</emphasis>: it represents the
                the destination, the output tonal scale. It ranges from 0
                (black) to 255 (white), from Shadows to Highlights.
              </para>
              
              
              
              
            </listitem>
            <listitem>
              <para>
                <emphasis>The horizontal gradient</emphasis>: it represents
                the input tonal scale. It, too, ranges from 0 (black) to 255
                (white), from Shadows to Highlights. When you
                adjust the curve, it splits up into two parts; the upper part
                then represents the <emphasis>tonal balance</emphasis> of the
                layer or selection.
              </para>
              
              
              
              
            </listitem>
            <listitem>
              <!--Please, keep all "en" together--><!--why?--><!--Because
                  it's easier to work with: you can copy-paste them as a
                  whole, easier to read-->
              <para>
                <emphasis>The chart</emphasis>: the curve is drawn on a grid
                and goes from the bottom left corner to the top right corner.
                The pointer x/y position is permanently displayed in the top
                left part of the grid. By default, this curve is straight,
                because every input level corresponds to the same
                ouput tone. GIMP automatically places an anchor at both
                ends of the curve, for black (0) and white (255).
              </para>
              <para>
                If you click on the curve, a new <emphasis>anchor</emphasis>
                is created. When the mouse pointer goes over an anchor, it
                takes the form of the moving crosshair. You can
                click-and-drag the anchor to bend the curve. If you click
                outside of the curve, an anchor is also created, and the
                curve includes it automatically.
              </para>
              <para>
                Unactive anchors are black. The active anchor is white. You
                can activate an anchor by clicking on it. You can also swap
                the anchor activation by using the Left and Right arrow keys
                of your keyboard. You can move the anchor vertically with the
                Up and Down arrow keys. This allows you to fine tune the
                anchor position. Holding the <keycap moreinfo="none">Shift</keycap> down lets
                you move it by increments of 15 pixels.
              </para>
              <para>
                Two anchors define a <emphasis>curve segment</emphasis> which
                represents a tonal range in the layer. You can click-and-drag
                this segment (this creates a new anchor). Of course, you
                can't drag it beyond the end anchors.
              </para>
              <para>
                To delete all anchors (apart from both ends), click on the
                <guilabel moreinfo="none">Reset Channel</guilabel> button. To delete only one
                anchor, move it onto another point or to the
                grid border.
              </para>
              <para>
                Meanwhile, on the canvas, the mouse pointer has the form of
                an eye-dropper. If you click on a pixel, a vertical line
                appears on the chart, positioned to the source value of this
                pixel in the selected channel. If you Shift-click, you create
                an anchor in the selected channel. If you Ctrl-click, you
                create an anchor in all channels, possibly including the
                Alpha channel. You can also Shift-drag and Ctrl-drag: this
                will move the vertical line and the anchor will show up when
                releasing the mouse left button.
              </para>
              <para>
                The histogram of the active layer or selection for the
                selected channel is represented grayed out in the chart. It's
                only a reference. <!--Using shift-drag on the image, you can see
                that you can't get a color and place an anchor with it
                outside of the histogram limits.
                <!-CHECK : placing an anchor outside the limits
                    is possible - did I miss(undestand) something?-->
                <!--USING SHIFT-DRAG...But actually misleading-->--&gt;
              </para>

              
              
              
              
              
              
              

              
              
              
              
              
              
              

              
              
              
              
              
              
              

              
              
              
              
              
              
              
            </listitem>
          </itemizedlist>
        </listitem>

        
      </varlistentry>

      <varlistentry>
        <term>All Channels</term>
        
        
        
        
        
        
        
        
        

        <listitem>
          <para>
            <guilabel moreinfo="none">Open</guilabel>: This button allows you to select
            a file holding curve settings.
          </para>
          <para>
            <guilabel moreinfo="none">Save</guilabel>: Allows you to save any curves
            you have set to a file that can be loaded later.
          </para>

          
          

          

          
          

          
          

          
          

          
          
          

          
          

          
          
          
          
        </listitem>
      </varlistentry>

      <varlistentry>

        <term>Curve type</term>
        
        
        
        
        
        
        
        
        

        <listitem>
          <para>
            <guilabel moreinfo="none">Smooth</guilabel>: This mode constrains the curve
            type to a smooth line with tension. It provides a more
            realistic render than the following.
          </para>
           <!--TODO es;it;pl;ru; v2.4-->
          <para>
            <!--CHECK de : IMHO "not totally free..." is wrong/misleading-->
            <!-- In former versions, you could draw separate line segments.
                 That's no longer possible-->
            <guilabel moreinfo="none">Free</guilabel>: With GIMP-v2.4, you are not totally
            free to draw the curve. You actually draw a broken line that you
            can smooth by clicking the <guibutton moreinfo="none">Smooth</guibutton> button.
          </para>
          
          
          
          
          
          
          
          
          

          
          

          
          
          
          
          
          
          
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Preview</term>
        
        
        
        
        
        
        
        
        

        <listitem>
          <para>
            The Preview button makes all changes to the levels dynamically so
            that the new level settings can be viewed immediately.
          </para>
          
          
          
          
          
          
          
          
          
        </listitem>
      </varlistentry>
    </variablelist>

    <variablelist>
      <title>
        <phrase>Tool Options dialog</phrase>
        
        
        
        
        
        
        
        
        
      </title>

      

      <para>
        Although this tool is not present in Tool box, nevertheless it has a
        Tool Option Dialog under the Toolbox. These options are described
        here:
      </para>
      
      
      
      
      
      
      
      

      <varlistentry>
        <term>Histogram Scale</term>
        
        
        
        
        
        
        
        
        

        <listitem>
          <para>
            These two options have the same action as the logarithmic and
            Linear buttons in the Curves dialog.
          </para>
          
          
          
          
          
          
          
          
          
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Sample Average</term>
        
        
        
        
        
        
        
        
        

        <listitem>
          <para><!--Changed 2008-01-24-->
             This slider sets the <quote>radius</quote> of the color-picking
             area. This area appears as a more or less enlarged square
             when you maintain the click on a pixel. Here, the eye-dropper is
             used to locate a pixel: radius = 1 seems the best.
          </para>
          
          
          
          
          
          
          
          
          
        </listitem>
      </varlistentry>
    </variablelist>
  </sect3>

  <sect3>
    <!--TODO es;it-->
    <title>
      <phrase>Using the <quote>Curves</quote> tool</phrase>
      
      
      
      
    </title>

    <!--CHECK en fr: why using a list of one entry here?-->
    <!--Because my original intention was to add other examples and to
        separate basic shapes and practical examples-->
    <variablelist>
      <varlistentry>
        <term>Summary and basic shapes</term>
        
        
        
        <listitem>
          <para>
            We create anchors and segments on the curve and we move them to
            shape the curve. This curve maps <quote>input</quote> tones of
            the active layer or selection to <quote>output</quote> tones.
          </para>
          
          
          

          <figure float="0">
            <title>
              <phrase>How the Curves tool works</phrase>
              
              
              
            </title>
            <mediaobject>
              <imageobject>
                <imagedata format="PNG" fileref="../images/toolbox/curves-work.png"/>
              </imageobject>
              <caption>
                <para>
                  Moving the anchor of a pixel upwards makes this pixel
                  brighter.
                </para>
                
                
                
              </caption>
            </mediaobject>
          </figure>

          <figure float="0">
            <title>
              <phrase>Making the curve more horizontal</phrase>
              
              
              
            </title>
            <mediaobject>
              <imageobject>
                <imagedata format="PNG" fileref="../images/toolbox/curves-horiz-1.png"/>
              </imageobject>
              <caption>
                <para>
                  Making the curve more horizontal forces all the input tonal
                  range to occupy a shrunk output tonal range.
                </para>
                
                
                
              </caption>
            </mediaobject>
            <mediaobject>
              <imageobject>
                <imagedata format="PNG" fileref="../images/toolbox/curves-horiz-2.png"/>
              </imageobject>
              <caption>
                <para>
                  The histogram shows the compression of pixels into the
                  output range. Darkest and brightest pixels disappeared:
                  contrast decreases.
                </para>
                
                
                
              </caption>
            </mediaobject>
          </figure>

          <figure float="0">
            <title>
              <phrase>Making the curve more vertical</phrase>
              
              
              
            </title>
            <mediaobject>
              <imageobject>
                <imagedata format="PNG" fileref="../images/toolbox/curves-vert-1.png"/>
              </imageobject>
              <caption>
                <para>
                  Moving the upper end point to the left and the lower end
                  point to the right is the same as moving the white slider to
                  the left and the black slider to the right in the Levels
                  tool: all pixels whose value is more than the white point
                  (the flat part of the curve) are made white (more colored /
                  more opaque according to the selected channel). All pixels
                  whose value is less than the black point (the lower
                  flattened curve) are made black (black / completely
                  transparent).
                  Pixels corresponding to points of the curve that have moved
                  up are made lighter. Pixels corresponding to points of the
                  curve that have moved down are made darker  (green arrows).
                  All these pixels will be extended to the whole output tonal
                  range.
                </para>
                
                
                
              </caption>
            </mediaobject>
            <mediaobject>
              <imageobject>
                <imagedata format="PNG" fileref="../images/toolbox/curves-vert-2.png"/>
              </imageobject>
              <caption>
                <para>
                  The histogram shows the extension of values, from black (0)
                  to White (255): contrast is increased. Since the Value
                  channel is selected, changes affect all color channels and
                  colors increase.
                </para>
                
                
                
              </caption>
            </mediaobject>
          </figure>
        </listitem>
      </varlistentry>

      <varlistentry>
        <!-- FIXME ru: translation missing -->
        <term>Practical cases</term>
        
        
        
        <listitem>
          <figure float="0">
            <title>
              <phrase>Invert colors</phrase>
              
              
              
            </title>
            <mediaobject>
              <imageobject>
                <imagedata format="PNG" fileref="../images/toolbox/curves-invert.png"/>
              </imageobject>
              <caption>
                <para><!--CHECK en,fr,ru: Subracting 255 from the channel or the channel from 255?-->
                  Black is made White (fully colored / fully opaque). White
                  is made black (black, fully transparent). All pixels adopt
                  the complementary color. Why that? Because subtracting 255
                  from the channel values gives the complementary color. For
                  example: 19;197;248 a sky blue gives 255-19; 255-197;
                  255-248 = 236;58;7, a bright red.
                </para>
                
                
                
              </caption>
            </mediaobject>
          </figure>

          <figure float="0">
            <title>
              <phrase>Enhance contrast</phrase>
              
              
              
            </title>
            <mediaobject>
              <imageobject>
                <imagedata format="PNG" fileref="../images/toolbox/curves-H-S.png"/>
              </imageobject>
              <caption>
                <para>
                  Contrast is increased in mid tones because the curve is
                  steeper there. Highlights and Shadows are increased but
                  contrast is slightly less in these areas because the curve
                  is flatter.
                </para>
                
                
                
              </caption>
            </mediaobject>
          </figure>

          <figure float="0">
            <title>
              <phrase>Working on color channels</phrase>
              
              
              
            </title>
            <mediaobject>
              <imageobject>
                <imagedata format="PNG" fileref="../images/toolbox/curves-lighten-1.png"/>
              </imageobject>
              <caption>
                <para>
                  For every channel, we moved the white point horizontally to
                  the left, to the first Highlights. This lightens Highlights
                  up. Then we shaped the curve to lighten Mid tons and
                  Shadows while keeping black.
                </para>
                
                
                
              </caption>
            </mediaobject>
          </figure>
          <mediaobject>
            <imageobject>
              <imagedata format="PNG" fileref="../images/toolbox/curves-lighten-2.png"/>
            </imageobject>
            <caption>
              <para>The original image and the result.</para>
              
              
              
            </caption>
          </mediaobject>
        </listitem>
      </varlistentry>
    </variablelist>

    

    

    

    

    

    

    
  </sect3>
</sect2>
