<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE sect2 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.docbook.org/xml/4.5/docbookx.dtd">
<!-- section history:
  2008-01-05 j.h: updated to v2.4
  2007-06-06 kost: added 'no'
  2007-04-15 Added Spanish translation by AntI
  2007-04-10 de Threshold+Qmask translation by ude
  2006-06-18 small tutorial Threshold+Qmask added by j.h
  2005-12-06 replaced simplesect by sect3 by lexa
  2005-12-06 replaced informalfigure by figure by lexa
  2005-08-07 de reviewed and restructured by axel.wernicke
-->
<!-- TODO: it zh_CN review needed -->
<sect2 id="gimp-tool-threshold">
  <sect2info>
    <revhistory>
      <revision>
        <revnumber>$Revision$</revnumber>
        <date>2008-01-05</date>
        <authorinitials>j.h</authorinitials>
      </revision>
      
      
      
      
    </revhistory>
  </sect2info>

  <title>
    <phrase>Threshold</phrase>
    
    
    
    
    
    
    
    
  </title>

  <indexterm significance="normal">
    <primary>Tools</primary>
    <secondary>Threshold</secondary>
  </indexterm>
  <indexterm significance="normal"><primary>Threshold</primary></indexterm>

  
  

  
  

  
  

  
  

  
  

  
  

  <para>
    The Threshold tool transforms the current layer or the selection into a
    black and white image, where white pixels represent the pixels of the
    image whose Value is in the threshold range, and black pixels represent
    pixels with Value out of the threshold range.
  </para>
  <para>
    You can use it to enhance a black and white image (a scanned text for
    example) or to create selection masks.
  </para>

  
  

  
  

  
  
  

  

  
  

  
  

  
  

  

  <note> <!--added 060618-->
    <para>
      As this tool creates a black and white image, the anti-aliasing of the
      original image disappears. If this poses a problem, rather use the
      <link linkend="gimp-tool-levels">Levels </link> tool.
    </para>
    
    
    
    
    
    
  </note>

  <sect3>
    <title>
      <phrase>Activate the Tool</phrase>
      
      
      
      
      
      
      
      
    </title>

    <para>
      You can access this tool from the image menu through
      <menuchoice moreinfo="none">
        <guimenu moreinfo="none"><accel>T</accel>ools</guimenu>
        <guisubmenu moreinfo="none"><accel>C</accel>olor Tools</guisubmenu>
        <guimenuitem moreinfo="none"><accel>T</accel>hreshold,</guimenuitem>
      </menuchoice>,
    </para>
    <para>
      <!--TODO es;it;pl; v2.4-->
      or through
      <menuchoice moreinfo="none">
        <guimenu moreinfo="none">Colors</guimenu>
        <guimenuitem moreinfo="none">Threshold</guimenuitem>
      </menuchoice>,
    </para>
    <para>
      or by clicking on the
      <guiicon moreinfo="none">
        <inlinemediaobject>
          <imageobject>
            <imagedata fileref="../images/toolbox/stock-tool-threshold-22.png"/>
          </imageobject>
        </inlinemediaobject>
      </guiicon>
      icon in Toolbox if this tool has been installed in it. You can do
      that through the <link linkend="gimp-tools-dialog">Tool dialog</link>.
    </para>

    
    

    

    
    

    
    
    

    

    
    

    
    

    
  </sect3>


  <sect3>
    <title>
      <phrase>Options</phrase>
      
      
      
      
      
      
      
      
    </title>

    <figure float="0">
      <title>
        <phrase>Threshold tool options</phrase>
        
        
        
        
        
  
        
      </title>

        <!-- TODO  it zh_CN: You may want to create a new snapshot with
        the threshold tool applied on a more colourful image to show the
        histogram described below (cf. de/tool-dialog-threshold.png) -->
        <mediaobject>
          <imageobject>
            <imagedata fileref="../images/toolbox/tools-threshold.png" format="PNG"/>
          </imageobject>
          
          
          
          
          
        </mediaobject>
    </figure>

    <variablelist>
      <varlistentry>
        <term>Threshold range</term>
        
        
        
        
        
        
        
        

        <listitem>
          <para>
            The Threshold tool provides a visual graph, a histogram, of the
            intensity value of the active layer or selection. You can set the
            threshold range either using the input boxes or clicking button 1
            and dragging on the graph. It allows you to select a part of the
            image with some intensity from a background with another
            intensity. Pixels inside the range will be white, and the others
            will be black. Adjust the range to get the selection you want in
            white on black background.
          </para>
          
          
          
          
          
          
          
          
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Preview</term>
        
        
        
        
        
        
        
        

        <listitem>
          <para>
            The Preview toggle allows dynamic updating of the active layer or
            selection while changes are made to the intensity level.
          </para>
          
          
          
          
          
    
          
          
        </listitem>
      </varlistentry>
    </variablelist>
  </sect3>


  <sect3> <!--added 060619-->
    <title>
      <phrase>
        Using Threshold and Quick Mask to create a selection mask
      </phrase>
      
      
      
      
      
      
    </title>

    <para>
      That's not always the case, but an element you want to extract from
      an image can stand out well against the background. In this case,
      you can use the Threshold tool to select this element as a whole.
      Grokking the GIMP described a method based on a channel mask, but now,
      using the <link linkend="gimp-image-window-qmask-button">Quick mask
      </link> is easier.
    </para>
    
    
    
    
    
    

    <procedure>
      <step performance="required">
        <para>
          First start decomposing you image into its RGB and HSV components by
          using the <link linkend="plug-in-decompose-registered">Decompose</link> filter. A
          new grey-scaled image is created and the components are displayed as
          layers in the Layer Dialog. These layers come with a thumbnail but
          it is too small for an easy study. You can, of course, increase the
          size of this preview with the dialog menu (the small triangular
          button), but playing with the <quote>eyes </quote> is more simple to
          display the wanted layer in the decompose image. Select the layer
          that isolates the element the best.
        </para>
        
        
        
        
        
        

        <figure float="0">
          <title>
            <phrase>
              The original image, the decompose image and its Layer Dialog
            </phrase>
            
            
            
            
      
            
          </title>

          <mediaobject>
            <imageobject>
              <imagedata fileref="../images/using/threshold-orig.png" format="PNG"/>
            </imageobject>
          </mediaobject>

          <mediaobject>
            <imageobject>
              <imagedata fileref="../images/using/threshold-decomp.png" format="PNG"/>
            </imageobject>
          </mediaobject>

          <mediaobject>
            <imageobject>
              <imagedata fileref="../images/using/threshold-layers.png" format="PNG"/>
            </imageobject>
          </mediaobject>
        </figure>
      </step>

      <step performance="required">
        <para>
          Call the Threshold tool from the decompose image. By moving the
          black cursor, fit threshold to isolate the best the element you want
          to extract. This will probably not be perfect: we will enhance the
          result with the selection mask we are going to create.
        </para>
        
        
        
        
  
        

        <warning>
          <para>
            Make sure you have selected the right layer when you call the
            Threshold tool: when it is opened, you can't change to another
            layer.
          </para>
          
          
          
          
          
          
        </warning>

        <figure float="0">
          <title>
            <phrase>The selected layer after threshold fit</phrase>
            
            
            
            
            
            
          </title>
          <mediaobject>
            <imageobject>
              <imagedata fileref="../images/using/threshold-fit.png" format="PNG"/>
            </imageobject>
            <caption>
              <para>
                We got the best outline for our flower. There are several red
                objects which we must remove.
              </para>
              
              
              
              
        
              
            </caption>
          </mediaobject>
        </figure>
      </step>

      <step performance="required">
        <para>
          Make sure the image displaying the selected layer is active and
          copy it to the clipboard with
          <keycombo moreinfo="none"><keycap moreinfo="none">Ctrl</keycap><keycap moreinfo="none">C</keycap></keycombo>.
        </para>
        
        
        
        
  
        
      </step>

      <step performance="required">
        <para>
          Now, make the original image active. Click on the
          <guibutton moreinfo="none">Quick Mask</guibutton> button at the bottom-left corner
          of the image window: the image gets covered with a red (default)
          translucent mask. This red color does not suit well to our image
          with much red: go to the Channel Dialog, activate the
          <quote>Quick mask</quote> channel and change this color with the
          <guibutton moreinfo="none">Edit Channel Attributes</guibutton>. Come back to the
          original image. Press
          <keycombo moreinfo="none"><keycap moreinfo="none">Ctrl</keycap><keycap moreinfo="none">V</keycap></keycombo> to
          paste the previously copied layer.
        </para>
        
        
        
        
  
        
        <figure float="0">
          <title>
            <phrase>The mask</phrase>
            
            
            
            
            
            
          </title>
          <mediaobject>
            <imageobject>
              <imagedata fileref="../images/using/threshold-mask.png" align="center" format="PNG"/>
            </imageobject>
          </mediaobject>
        </figure>
      </step>

      <step performance="required">
        <para>
          Voil√†. Your selection mask is ready: you can improve the selection
          as usually. When the selection is ready, disable the Quick mask by
          clicking again on its button: you will see the marching ants around
          the selection.
        </para>
        
        
        
        
  
        
        <figure float="0">
          <title>
            <phrase>The result</phrase>
            
            
            
            
      
            
          </title>
          <mediaobject>
            <imageobject>
              <imagedata fileref="../images/using/threshold-result.png" format="PNG"/>
            </imageobject>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata fileref="../images/using/threshold-selection.png" format="PNG"/>
            </imageobject>
          </mediaobject>
        </figure>

        <para>
          We used the Zoom to work at a pixel level, the Lasso to remove large
          unwanted areas, the pencil (to get hard limits), black paint to
          remove selected areas, white paint to add selected areas, especially
          for stem.
        </para>
        
        
        
        
  
        
      </step>
    </procedure>
  </sect3>
</sect2>
