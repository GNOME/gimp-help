<?xml version='1.0' encoding='UTF-8'?>

<sect2 id='plug-in-ifscompose' lang="en;fr;zh_CN">
  <title lang="en">IFS Compose</title>
  <title lang="fr">Composition fractale</title>
  <title lang="zh_CN">IFS 分形</title> 

  <indexterm>
    <primary lang="en">Filter</primary>
    <secondary lang="en">Render</secondary>
    <tertiary lang="en">IFS Compose</tertiary>
    
    <primary lang="fr">Filtre</primary>
    <secondary lang="fr">Rendu</secondary>
    <tertiary lang="fr">Composition fractale</tertiary>    

    <primary lang="zh_CN">滤镜</primary>
    <secondary lang="zh_CN">绘制</secondary>
    <tertiary lang="zh_CN">IFS 分形</tertiary>
  </indexterm>

  <mediaobject lang="en;zh_CN">
    <imageobject>
      <imagedata fileref='../images/filters/filters-render-ifscompose.png' format='PNG'/>
    </imageobject>
  </mediaobject>
  <mediaobject lang="fr">
    <imageobject>
      <imagedata fileref='../images/filters/fr/filters-render-ifscompose.png' format='PNG'/>
    </imageobject>
  </mediaobject>

  <simplesect>
    <title lang="en">Overview</title>
    <title lang="fr">Généralités</title>
    <title lang="zh_CN">概述</title>

    <para lang="en">
      This filter is found in
      <guimenuitem>Image&gt;Filters/Render/Nature/IFS <accel>C</accel>ompose...</guimenuitem>
    </para>
    <para lang="fr">
      Ce filtre se trouve à
      <guimenuitem>Image&gt;Filtres/Rendu/Nature/<accel>C</accel>omposition
      fractale...</guimenuitem>
    </para>
    <para lang="zh_CN">
      该滤镜在<guimenuitem>图像&gt;滤镜/绘制/自然/IFS 分形</guimenuitem>。
    </para>

    <para lang='en'>
      This fractal-based plug-in is truly wonderful! With this
      versatile instrument, you can create amazingly naturalistic
      organic shapes, like leaves, flowers, branches, or even whole
      trees.  ("IFS" stands for "Iterated Function System".)
    </para>
    <para lang='fr'>
      Ce filtre opérant sur les fractales est vraiment merveilleux !
      Avec cet outil versatile vous pourrez créer des figures organiques
      originales tels des feuilles, des fleurs, des branches ou même
      des arbres. Le nom original du greffon est composition IFS qui
      est l'acronyme de «Iterated Function System»
      soit : Systême de fonctions itératives.
    </para>      
    <para lang="zh_CN">
      这个基于分形的插件的确非常棒！这些多功能的指令可以产生让人震惊的自然物体形状，如树叶，花朵，树枝，甚至是整棵树。(“IFS” 代表 “迭代函数系统”。)
    </para>

    <para lang='en'>
      The key to using this plug-in lies in making very small and
      precise movements in fractal space. The outcome is always hard
      to predict, and you have to be extremely gentle when you change
      the pattern. If you make a component triangle too big, or if you
      move it too far (even ever so slightly), the preview screen will
      black out, or more commonly, you'll get stuck with a big
      shapeless particle cloud. 
    </para>
    <para lang='fr'>
      La clé pour utiliser ce filtre est de faire de petits et précis
      mouvements dans l'espace fractal. Le résultat est toujours difficile
      à prédire et vous devez être très méticuleux avec votre générateur 
      fractal. Si vous faites un composant en forme de triangle trop gros
      ou si vous vous le bougez trop rapidement, l'aperçu sera noir,
      ou plus communément vous allez être deçu d'obtenir un gros nuage
      de particules.  
    </para>
    <para lang="zh_CN">
      使用该插件的关键是在分形空间中进行细微而精确地移动。其结果比较难预测，而且您改变图案时需要特别地小心。当组件三角过大，或把它移地太远时(甚至只是有一点远)，其预览屏幕会黑掉，更常见的情况是，出现一个让您心烦的巨大不成形的块状云。
    </para>

    <para lang='en'>
      A word of advice: When you have found a pattern you want to work
      with, make only small changes, and stick to variations of that
      pattern. It's all too easy to lose a good thing. Contrary to
      what you might believe, it's really much easier to create a leaf
      or a tree with IFS Compose than to make a defined geometrical
      pattern (where you actually know what you're doing, and end up
      with the pattern you had in mind). 
    </para>
    <para lang='fr'>
      Un conseil d'ami : quand vous avez trouvé un motif générateur avec
      lequel vous souhaitez travailler, ne faites que de petits changements.
      C'est vraiment trop facile de perdre un bon motif. Au contraire de ce 
      que vous pensez, c'est beaucoup plus facile de créer une feuille ou un
      arbre avec la Composition IFS que de définir un motif géométrique.
    </para>
    <para lang="zh_CN">
      这里是一些建议：当您对一个图案进行处理了，只进行细微的改变，然后在其变体上操作。这样就不会使那些好的东西丢失。在该滤镜中产生一个树叶或整棵树要比产生那些有准确几何尺寸的图案容易。
    </para>

    <para lang='en'>
      For a brief introduction to IFS's see Foley and van Dam, et
      al,. <citetitle pubwork='book'>Computer Graphics, Principles and
      Practice</citetitle>, 2nd Ed.,   (Addison Wesley, 1990).
    </para>
    <para lang='fr'>
      Pour une introduction rapide à l'IFS voyez Foley et van Dam
      <citetitle pubwork='book'>Computer Graphics, Principles and
      Practice</citetitle>, 2ème Éd.,   (Addison Wesley, 1990).
    </para>
    <para lang="zh_CN">
      关于 IFS 的简明介绍请看 Foley 和 Van Dam 等所写的<citetitle pubwork='book'>Computer Graphics, Principles and Pratice</citetitle>, 第二版. (Addison Wesley, 1990).
    </para>

    <formalpara lang='en'>
      <title>The Main Interface</title>

      <para>
	The plug-in interface consists of the compose area to the left, a
	preview screen to the right, and some tabs and option buttons at
	the bottom of the dialog.  The Default setting (in the preview
	window) is three equilateral triangles. (This gives rise to a
	fractal pattern called the <emphasis>Sierpinski
	Triangle</emphasis>).  
      </para>
    </formalpara>

    <formalpara lang='fr'>
      <title>L'interface principale</title>
      <para>
	L'interface du filtre consiste en une zone de composition à
	gauche, un aperçu à droite et quelques options et boutons en
	bas. Le motif générateur par défaut est composé de trois
	triangles équilatéraux (ceci est connu sous le nom de
	<emphasis>Triangle Sierpinski</emphasis>).
      </para>
    </formalpara>

    <formalpara lang="zh_CN">
      <title>主界面</title>
      <para>
        该滤镜界面包括左边的创作区域，右边的预览屏幕和对话框底部的一些页签和选项按钮。默认的设置(预览窗口中)是三个等边三角形。(在分形图案中它们叫 <emphasis>Sierpinski 三角形</emphasis>)。
      </para>
    </formalpara>
  </simplesect>

  <simplesect>
    <title lang="en">Options</title>
    <title lang="fr">Options</title>
    <title lang="zh_CN">选项</title>
    <variablelist>    

      <varlistentry>
        <term lang="en">Relative Probability</term>
        <term lang="fr">Probabilité relative</term>
        <term lang="zh_CN">相对概率</term>
        <listitem>
          <para lang="en">
            Determines influence or total impact of a certain fractal. 
          </para> 
          <para lang="fr">
            Détermine l'influence ou l'impact global de la fractale.
          </para> 
          <para lang="zh_CN">
            决定一个特定分形的影响和总的效果。
          </para>
       </listitem>
      </varlistentry>
  
      <varlistentry>
        <term lang="en">Spatial Transformation</term>
        <term lang="fr">Transformation spatiale</term>
        <term lang="zh_CN">空间变换</term>
        <listitem> 
          <para lang="en">
            Gives you information on the active fractal, and allows
            you to type a value instead of changing it
            manually. Changing parameters with the mouse isn't very
            accurate, so this is a useful option when you need to be
            exact. 
          </para> 
          <para lang="fr">
            Vous donne des informations sur la fractale active et vous
            permet de rentrer une valeur au lieu de la changer à la
            souris qui n'a pas la même précision.
          </para> 
          <para lang="zh_CN">
            提供活动分形的信息并让您准确地输入这些参数的数值。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term lang="en">Simple color transformation</term>
        <term lang="fr">Transformation de couleur simple</term>
        <term lang="zh_CN">简单颜色变换</term>
        <listitem>
          <para lang="en">
            Changes the color of the currently selected fractal
            component (which starts as the foreground color in the
            toolbox) to a color of your choice.  
          </para>
          <para lang="fr">
            Change la couleur du composant actif de la fractale
            (qui utilise normalement la couleur de premier plan de la boîte
            à outils)
          </para>
          <para lang="zh_CN">
            改变当前选中分形组件的颜色，它从工具栏中的背景色开始到您所选择的颜色。
          </para>
        </listitem>
      </varlistentry>

       <varlistentry>
        <term lang="en">Full color transformation:</term>
        <term lang="fr">Transformation de couleur complète</term>
        <term lang="zh_CN">完全颜色变换</term>
        <listitem>
          <para  lang="en">
            Like the Simple color transformation but this time you can manage
            the color transformation for each color channel and for the alpha
            channel (shown as a black channel).
          </para>
          <para lang="fr">
            Comme la Transformation de couleur simple mais cette fois vous
            gérez la transformation de couleur pour chaque canal de couleur 
            et pour le canal Alpha (représenté en noir).
          </para>
          <para lang="zh_CN">
            和简单颜色变换相似，但是在这里能够控制每个颜色通道和 Alpha 通道(显示为黑色通道)单独的颜色变换。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term lang="en">Scale Hue/Value</term>
        <term lang="fr">Échelle de Teinte/Luminosité</term>
        <term lang="zh_CN">色调/亮度缩放</term>
        <listitem>
          <para lang="en">
            When you have many fractals with different colors, the
            colors blend into each other. So even if you set "pure
            red" for a fractal, it might actually be quite blue in
            some places, while another "red" fractal might have a lot
            of yellow in it. Scale Hue/Value changes the color
            strength of the active fractal, or how influential that
            fractal's color should be.  
          </para>
          <para lang="fr">
            Quand vous avez plusieurs fractales avec plusieurs couleurs,
            les couleurs se mélangent entre elles. Ainsi même si vous 
            indiquez «entièrement rouge» pour une fractale il se peut 
            qu'il y ait du bleu quelque part tandis qu'une autre fractale
            «rouge» produise du jaune.
            <guilabel>Échelle de Teinte/Luminosité</guilabel>  change
            l'intensité de la couleur de la fractale active ou comment
            la couleur de la fractale devrait influencer globalement.
          </para>
          <para lang="zh_CN">
            当有多个不同颜色的分形时，这些颜色就相互混和在一起。因此即使是赋予分形“纯红色”，它也可能在某些地方是偏蓝的，而在其它地方的“红色”分形则有可能包含很多黄色。色调/亮度缩放改变活动分形的颜色强度，也就是分形的颜色影响力的大小。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term lang="en">Render Options: Spot Radius</term>
        <term lang="fr">Options de rendu : Rayon du point</term>
        <term lang="zh_CN">绘制选项：点半径</term>
        <listitem>
          <para lang="en">
            Determines the density of the "brushstrokes" in the
            rendered image. A low spot radius is good for thin
            particle clouds or spray, while a high spot radius
            produces thick, solid color strokes much like watercolor
            painting. Be careful not to use too much spot radius -- it
            takes a lot of time to render.  
          </para>
          <para lang="fr">
            Détermine la densité du tracé de la brosse dans l'image rendue.
            Un rayon faible est meilleur pour des particules fines ou
            une diffusion générale tandis qu'un rayon élevé produit 
            des couleurs fines et pleines tels qu'un tracé de style
            peinture à l'eau. Soyez attentif à ne pas utiliser un
            rayon trop grand qui entrainerait un temps de rendu très long.
          </para>
          <para lang="zh_CN">
            它决定绘制图像中“画笔笔划”的密度。小的点半径适合于薄而分散的块状云，而大的点半径产生厚而像水彩画一样的纯色笔划。注意不要用过大的点半径--它会耗费很多时间渲染。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term lang="en">Render Options: Subdivide</term>
        <term lang="fr">Options de rendu : Subdiviser</term>
        <term lang="zh_CN">绘制选项：细分</term>
        <listitem>
          <para lang="en">
            Controls the level of detail.
          </para>
          <para lang="fr">
            Contrôle le niveau de détail du rendu.
          </para>
          <para lang="zh_CN">
            控制细节级别。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term lang="en">Render Options: Iterations</term>
        <term lang="fr">Options de rendu : Itérations</term>
        <term lang="zh_CN">绘制选项：迭代次数</term>
        <listitem>
          <para lang="en">
            Determines how many times the fractal will repeat
            itself. (A high value for Subdivide and Iterations is for
            obvious reasons a waste of process time unless your image
            is very large.)  
          </para>
          <para lang="fr">
            Détermine combien de fois la fractale sera répétée 
            (une valeur élevée pour les subdivisions d'itérations 
            est pour des raisons évidentes un processus gourmand
            en temps CPU selon la taille de votre image). 
          </para>
          <para lang="zh_CN">
            决定分形重复自己的次数。(除非是图像特别大，不然很显然细分和迭代次数越大，耗费的处理时间就越多。)
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term lang="en">Render Options: Memory</term>
        <term lang="fr">Options de rendu : Mémoire max.</term>
        <term lang="zh_CN">绘制选项：最大内存</term>
        <listitem>
          <para lang="en">
            Enables you to speed up rendering time. This is especially
            useful when working with a large spot radius; just
            remember to use even multiples of the default value:
            4096, 8192, 16384, ... 
          </para>
          <para lang="fr">
            Rend posssible d'accélérer le rendu. C'est particulièrement 
            utile lorsque vous travaillez un un rayon de point elevé.
            Souvenez-vous simplement d'utiliser des multiples de la
            valeur par défaut : 4096, 8192, 16384, ...
          </para>
          <para lang="zh_CN">
            它可以加速渲染时间。在处理大的点半径时特别有效;不过要记住使用默认值的倍数：4096，8192,16384, ...
          </para>
        </listitem>
      </varlistentry>

    </variablelist>
  </simplesect>

  <simplesect lang='en'>
    <title lang='en'>A Brief Tutorial</title>
    <para lang='en'>
      This is a rather complex plug-in, so to help you understand it,
      we'll guide you through an example where you'll create a leaf or
      branch.
    </para>
    <para lang='en'>
      Many forms of life, and especially plants, are built like
      mathematical fractals, i.e., a shape that reproduces or repeats
      itself indefinitely into the smallest detail. You can easily
      reproduce the shape of a leaf or a branch by using four (or
      more) fractals. Three fractals make up the tip and sides of the
      leaf, and the fourth represents the stem. 
    </para>
    <orderedlist>
      <listitem>
        <para lang='en'>
          Before invoking the filter: Select 
          <menuchoice>
            <guimenu>File</guimenu>
            <guimenuitem>New Image</guimenuitem>
          </menuchoice>
          Add a transparent layer with
          <menuchoice>
            <guimenu>Layers</guimenu>
            <guisubmenu>Layers and Channels</guisubmenu>
            <guimenuitem>New Layer</guimenuitem>
          </menuchoice>
          Set the foreground color in the toolbox to black, and
          set the background to white. 
        </para>
      </listitem>

      <listitem>
        <informalfigure>
          <mediaobject>
            <imageobject>
              <imagedata fileref='../images/filters/examples/ifscompose-tut1.png' format='PNG'/> 
            </imageobject>

	    <caption lang="en">
	      <para>
		Start by rotating triangles 2 and 3, trying
		to keep them nearly the same size.
	      </para>
	    </caption>
          </mediaobject>
        </informalfigure>

        <para lang='en'>
          Open IFS Compose. Start by rotating the right and bottom
          triangles, so that they point upward. You'll now be able to
          see the outline of what's going to be the tip and sides of
          the leaf.  (If you have problems, it may help to know that
          the three vertices of a triangle are not equivalent.) 
        </para>

      </listitem>

      <listitem>
        <para lang='en'>
          To make the leaf symmetrical, adjust the bottom triangle to
          point slightly to the left, and the right triangle to point
          slightly to the right. 
        </para>
      </listitem>

      <listitem>
        <informalfigure>
          <mediaobject>
            <imageobject>
              <imagedata fileref='../images/filters/examples/ifscompose-tut2.png' format='PNG'/> 
            </imageobject>

	    <caption lang='en'>
	      <para>
		Add a fourth component, then stretch, scale, and move it
		as shown.
	      </para>
	    </caption>
          </mediaobject>
        </informalfigure>

        <para lang='en'>
          Press <guibutton>New</guibutton> to add a component to the
          composition. This is going to be the stem of the leaf, so we
          need to make it long and thin. Press
          <guibutton>Stretch</guibutton>, and drag to 
          stretch the new triangle. Don't be alarmed if this messes up
          the image, just use <guibutton>Scale</guibutton> to adjust
          the size of the overlong 
          triangle. You'll probably also have to move and rotate the
          new fractal to make it look convincing. 
        </para>
      </listitem>

      <listitem>
        <informalfigure>
          <mediaobject>
            <imageobject>
              <imagedata fileref='../images/filters/examples/ifscompose-tut3.png' format='PNG'/> 
            </imageobject>

	    <caption lang='en'>
	      <para>
		Enlarge component 1, arrange the other components
		appropriately, then select all, scale and rotate.
	      </para>
	    </caption>
          </mediaobject>
        </informalfigure>

        <para lang='en'>
          You still have to make it look more leaf-like. Increase the
          size of the top triangle, until you think it's thick and
          leafy enough. Adjust all fractals until you're happy with
          the shape. Right-click to get the popup menu, and choose
          <guibutton>Select all</guibutton>. Now all components are
          selected, and you can scale 
          and rotate the entire leaf. 
        </para>
      </listitem>

      <listitem>
        <informalfigure>
          <mediaobject>
            <imageobject>
              <imagedata fileref='../images/filters/examples/ifscompose-tut4.png' format='PNG'/> 
            </imageobject>

	    <caption lang='en'>
	      <para>
		Assign a brownish color to component 4, and various shades
		of green to the other components.
	      </para>
	    </caption>
          </mediaobject>
        </informalfigure>

        <para lang='en'>
          The final step is to adjust color. Click on the
          <guibutton>Color Transformation</guibutton> tab, and choose
          a different color for each fractal. To do this, check
          <guibutton>Simple</guibutton> and press the right color 
          square. A color circle appears, where you can click or
          select to choose a color. 
        </para>
      </listitem>

      <listitem>
        <para lang='en'>
          Press OK to apply the image, and voilà, you've just made a
          perfect fractal leaf! Now that you've got the hang of it,
          you'll just have to experiment and make your own
          designs. All plant-imitating fractals (be they oak trees,
          ferns or straws) are more or less made in this fashion,
          which is leaves around a stem (or several stems). You just
          have to twist another way, stretch and turn a little or add
          a few more fractals to get a totally different plant. 
        </para>
      </listitem>

    </orderedlist>
  </simplesect>  	
</sect2>
