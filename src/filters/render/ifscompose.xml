<?xml version='1.0' encoding='UTF-8'?>

<sect2 id='plug-in-ifscompose'>
  <title lang="en">IFS Compose</title>
  <indexterm>
    <primary lang="en">IFS Compose</primary>
  </indexterm>

  <mediaobject lang="en">
    <imageobject>
      <imagedata fileref='../images/filters/filters-render-ifscompose.png' format="PNG"/>
    </imageobject>
  </mediaobject>
  <mediaobject lang="fr">
    <imageobject>
      <imagedata fileref='../images/filters/filters-render-ifscompose.png' format="PNG"/>
    </imageobject>
  </mediaobject>

  <simplesect>
    <title lang="en">Overview</title>
    <title lang="fr">Généralités</title>    
    <para lang='en'>
      This filter is found in 
      <menuchoice>
        <guimenu>Filters</guimenu>
        <guisubmenu>Render</guisubmenu>
        <guisubmenu>Nature</guisubmenu>
        <guimenuitem>Ifs<accel>C</accel>ompose</guimenuitem>
      </menuchoice>.
    </para>
    <para lang='en'>
      This fractal-based plug-in is truly wonderful! With this
      versatile instrument, you can create amazingly naturalistic
      organic shapes, like leaves, flowers, branches, or even whole
      trees.  ("IFS" stands for "Iterated Function System".)
    </para>
    <para lang='en'>
      The key to using this plug-in lies in making very small and
      precise movements in fractal space. The outcome is always hard
      to predict, and you have to be extremely gentle when you change
      the pattern. If you make a component triangle too big, or if you
      move it too far (even ever so slightly), the preview screen will
      black out, or more commonly, you'll get stuck with a big
      shapeless particle cloud. 
    </para>
    <para lang='en'>
      A word of advice: When you have found a pattern you want to work
      with, make only small changes, and stick to variations of that
      pattern. It's all too easy to lose a good thing. Contrary to
      what you might believe, it's really much easier to create a leaf
      or a tree with IFS Compose than to make a defined geometrical
      pattern (where you actually know what you're doing, and end up
      with the pattern you had in mind). 
    </para>
    <para lang='en'>
      For a brief introduction to IFS's see Foley and van Dam, et
      al,. <citetitle pubwork='book'>Computer Graphics, Principles and
      Practice</citetitle>, 2nd Ed.,   (Addison Wesley, 1990).
    </para>
    <formalpara lang='en'>
      <title>The Main Interface</title>
      The plug-in interface consists of the compose area to the
      left, a preview screen to the right, and some tabs and option
      buttons at the bottom of the dialog.  The Default setting (in
      the preview window) is three equilateral triangles. (This
      gives rise to a fractal pattern called the
      <emphasis>Sierpinski Triangle</emphasis>).  
    </formalpara>
  </simplesect>

  <simplesect>
    <title lang="en">Options</title>
    <title lang="fr">Options</title>
    <variablelist>    

      <varlistentry>
        <term lang="en">Relative Probability</term>
        <listitem>
          <para lang="en">
           Determines influence or total impact of a certain fractal. 
          </para> 
       </listitem>
      </varlistentry>
  
      <varlistentry>
        <term lang="en">Spatial Transformation</term>
        <listitem lang="en"> 
          <para>
            Gives you information on the active fractal, and allows
            you to type a value instead of changing it
            manually. Changing parameters with the mouse isn't very
            accurate, so this is a useful option when you need to be
            exact. 
          </para> 
        </listitem>
      </varlistentry>

      <varlistentry>
        <term lang="en">Simple color transformation:</term>
        <listitem lang="en">
          <para>
            Changes the color of the currently selected fractal
            component(which starts as the foreground color in the
            toolbox) to a color of your choice.  
          </para>
        </listitem>
      </varlistentry>

       <varlistentry>
        <term lang="en">Full color transformation:</term>
        <listitem lang="en">
          <para>
            The author of this documentation has not been able to
            figure out what this does.  Here is a description from the
            First Edition of the Gimp User Manual.  I don't understand
            it, but you may have better luck:  "Changes color
            influence from the other (inactive) 
            fractals. You can, for example, in the red fractal, set
            Full color transformation to red in all of the swatches,
            and you won't get any influence at all in that part of the
            fractal composition." 
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term lang="en">Scale Hue/Value</term>
        <listitem lang="en">
          <para>
            When you have many fractals with different colors, the
            colors bleed into each other. So even if you set "pure
            red" for a fractal, it might actually be quite blue in
            some places, while another "red" fractal might have a lot
            of yellow in it. Scale Hue/Value changes the color
            strength of the active fractal, or how influential that
            fractal's color should be.  
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term lang="en">Render Options: Spot Radius</term>
        <listitem lang="en">
          <para>
            Determines the density of the "brushstrokes" in the
            rendered image. A low spot radius is good for thin
            particle clouds or spray, while a high spot radius
            produces thick, solid color strokes much like watercolor
            painting. Be careful not to use too much spot radius -- it
            takes a lot of time to render.  
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term lang="en">Render Options: Subdivide</term>
        <listitem lang="en">
          <para>
            Controls the level of detail.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term lang="en">Render Options: Iterations</term>
        <listitem lang="en">
          <para>
            Determines how many times the fractal will repeat
            itself. (A high value for Subdivide and Iterations is for
            obvious reasons a waste of process time unless your image
            is very large.)  
         </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term lang="en">Render Options: Memory</term>
        <listitem lang="en">
          <para>
            Enables you to speed up rendering time. This is especially
            useful when working with a large spot radius; just
            remember to use even multiples of the default value:
            4096, 8192, 16384, ... 
          </para>
        </listitem>
      </varlistentry>

    </variablelist>
  </simplesect>

  <simplesect>
    <title lang='en'>A Brief Tutorial</title>
    <para lang='en'>
      This is a rather complex plug-in, so to help you understand it,
      we'll guide you through an example where you'll create a leaf or
      branch.
    </para>
    <para lang='en'>
      Many forms of life, and especially plants, are built like
      mathematical fractals, i.e., a shape that reproduces or repeats
      itself indefinitely into the smallest detail. You can easily
      reproduce the shape of a leaf or a branch by using four (or
      more) fractals. Three fractals make up the tip and sides of the
      leaf, and the fourth represents the stem. 
    </para>
    <orderedlist>
      <listitem>
        <para lang='en'>
          Before invoking the filter: Select 
          <menuchoice>
            <guimenu>File</guimenu>
            <guimenuitem>New Image</guimenuitem>
          </menuchoice>
          Add a transparent layer with
          <menuchoice>
            <guimenu>Layers</guimenu>
            <guisubmenu>Layers and Channels</guisubmenu>
            <guimenuitem>New Layer</guimenuitem>
          </menuchoice>
        . Set the foreground color in the toolbox to black, and
          set the background to white. 
        </para>
      </listitem>

      <listitem>
        <informalfigure>
          <mediaobject>
            <imageobject>
              <imagedata
              fileref='../images/filters/examples/ifscompose-tut1.png'
              format="PNG"/> 
            </imageobject>
          </mediaobject>
          <caption>
            <para lang='en'>
              Start by rotating triangles 2 and 3, trying
              to keep them nearly the same size.
            </para>
          </caption>
        </informalfigure>

        <para lang='en'>
          Open IFS Compose. Start by rotating the right and bottom
          triangles, so that they point upward. You'll now be able to
          see the outline of what's going to be the tip and sides of
          the leaf.  (If you have problems, it may help to know that
          the three vertices of a triangle are not equivalent.) 
        </para>

      </listitem>

      <listitem>
        <para lang='en'>
          To make the leaf symmetrical, adjust the bottom triangle to
          point slightly to the left, and the right triangle to point
          slightly to the right. 
        </para>
      </listitem>

      <listitem>
        <informalfigure>
          <mediaobject>
            <imageobject>
              <imagedata
              fileref='../images/filters/examples/ifscompose-tut2.png'
              format="PNG"/> 
            </imageobject>
          </mediaobject>
          <caption>
            <para lang='en'>
              Add a fourth component, then stretch, scale, and move it
              as shown.
            </para>
          </caption>
        </informalfigure>

        <para lang='en'>
          Press <guibutton>New</guibutton> to add a component to the
          composition. This is going to be the stem of the leaf, so we
          need to make it long and thin. Press
          <guibutton>Stretch</guibutton>, and drag to 
          stretch the new triangle. Don't be alarmed if this messes up
          the image, just use <guibutton>Scale</guibutton> to adjust
          the size of the overlong 
          triangle. You'll probably also have to move and rotate the
          new fractal to make it look convincing. 
        </para>
      </listitem>

      <listitem>
        <informalfigure>
          <mediaobject>
            <imageobject>
              <imagedata
              fileref='../images/filters/examples/ifscompose-tut3.png'
              format="PNG"/> 
            </imageobject>
          </mediaobject>
          <caption>
            <para lang='en'>
              Enlarge component 1, arrange the other components
              appropriately, then select all, scale and rotate.
            </para>
          </caption>
        </informalfigure>

        <para lang='en'>
          You still have to make it look more leaf-like. Increase the
          size of the top triangle, until you think it's thick and
          leafy enough. Adjust all fractals until you're happy with
          the shape. Right-click to get the popup menu, and choose
          <guibutton>Select all</guibutton>. Now all components are
          selected, and you can scale 
          and rotate the entire leaf. 
        </para>
      </listitem>

      <listitem>
        <informalfigure>
          <mediaobject>
            <imageobject>
              <imagedata
              fileref='../images/filters/examples/ifscompose-tut4.png'
              format="PNG"/> 
            </imageobject>
          </mediaobject>
          <caption>
            <para lang='en'>
              Assign a brownish color to component 4, and various shades
              of green to the other components.
            </para>
          </caption>
        </informalfigure>

        <para lang='en'>
          The final step is to adjust color. Click on the
          <guibutton>Color Transformation</guibutton> tab, and choose
          a different color for each fractal. To do this, check
          <guibutton>Simple</guibutton> and press the right color 
          square. A color circle appears, where you can click or
          select to choose a color. 
        </para>
      </listitem>

      <listitem>
        <para lang='en'>
          Press OK to apply the image, and voilà, you've just made a
          perfect fractal leaf! Now that you've got the hang of it,
          you'll just have to experiment and make your own
          designs. All plant-imitating fractals (be they oak trees,
          ferns or straws) are more or less made in this fashion,
          which is leaves around a stem (or several stems). You just
          have to twist another way, stretch and turn a little or add
          a few more fractals to get a totally different plant. 
        </para>
      </listitem>

    </orderedlist>
  </simplesect>  	
</sect2>
