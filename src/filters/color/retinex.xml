<?xml version='1.0' encoding='UTF-8'?>

<!DOCTYPE sect2
  PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
  "http://www.docbook.org/xml/4.3/docbookx.dtd">

<!-- section history: 
   2005-11-26: created by julien hardelin. I wrote this text to give some 
   explanation about this filter, but I didn't understand options... 
   If you do, please write them.
-->

<sect2 id='plug-in-retinex' lang="en;fr">
  <title> 
    <phrase lang="en">Retinex</phrase>
    <phrase lang="fr">Normalisation Retinex</phrase>
  </title>

  <indexterm lang="en">
    <primary>Filters</primary>
    <secondary>Map</secondary>
  </indexterm>
  <indexterm lang="en"><primary>Retinex</primary></indexterm>
  
  <indexterm lang="fr">
    <primary>Filtres</primary>
    <secondary>Carte</secondary>
  </indexterm>
  <indexterm lang="fr"><primary>Normalisation Retinex</primary></indexterm>
  
  <sect3>
    <title>
      <phrase lang="en">Overview</phrase>
      <phrase lang="fr">Généralités</phrase>
    </title>
    
    <para lang="en">
      This filter is found in the image window menu under
      <menuchoice>
        <guimenu>Filters</guimenu>
        <guisubmenu>Colors</guisubmenu>
        <guimenuitem><accel>R</accel>etinex</guimenuitem>
      </menuchoice>.
    </para>
    <para lang="en">
      "Retinex" improves visual rendering of an image when lighting 
      conditions are not good. While our eye can see colors correctly when 
      light is low, cameras and video cams can't manage this well. The 
      MSRCR (MultiScale Retinex with Color Restoration) algorithm, which is 
      at the root of the "Retinex" filter, is inspired by the eye biological 
      mecanisms to adapt itself to these conditions. "Retinex" stands for 
      Retina + cortex.
    </para>
    <para lang="en">
      Besides digital photography, Retinex algorithm is used to make 
      the information in astronomical photos visible and detect, in 
      medicine, poorly visible structures in X-rays or scanners.
    </para>
    
    <para lang="fr">
      On accède à ce filtre par le menu d'image en suivant:
      <menuchoice>
        <guimenu>Filtres</guimenu>
        <guisubmenu>Couleurs</guisubmenu>
        <guimenuitem>Normalisation <accel>R</accel>etinex</guimenuitem>
      </menuchoice>.
    </para>
    <para lang="fr">
      «Retinex» améliore le rendu visuel d'une image lorsque les conditions 
      d'éclairage ne sont pas satisfaisantes. Alors que l'œil est capable de 
      voir correctement les couleurs dans des conditions de faible éclairage 
      ou d'ambiance colorée, les appareils photo et les caméras vidéo 
      réussissent mal dans ces conditions. C'est en s'inspirant des 
      mécanismes biologiques de l'œil pour s'adapter à ces conditions que 
      l'algorithme MSRCR (MultiScale Retinex with Color Restoration), qui est 
      à la base du greffon «Normalisation Retinex», parvient à rétablir des 
      couleurs satisfaisantes. Retinex est la contraction de Rétine+cortex.
    </para>
    <para lang="fr">
      Outre la photographie numérique, l'algorithme Retinex est utilisé 
      en astronomie pour rendre visible l'information contenu dans les 
      photographies astronomiques, en médecine pour détecter des structures 
      peu visibles dans les radiographies et les tomodensitométries.
    </para>
  </sect3>
  
  <sect3 lang="en;fr">
    <title>
      <phrase lang="en;fr">Options</phrase>
    </title>
      
    <figure lang="en;fr">
      <title>
        <phrase lang="en"><quote>Retinex</quote> filter options</phrase>
        <phrase lang="fr">Options du filtre «Normalisation Retinex»</phrase>
      </title>
      <mediaobject>
        <imageobject lang="en">
          <imagedata fileref="../images/filters/options-colors-retinex.png"
                   format="PNG"/>
        </imageobject>
        <imageobject lang="fr">
          <imagedata fileref="../images/filters/fr/options-colors-retinex.png"
                     format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    
    <para lang="en">
      These options call for notions that only mathematicians can 
      understand. In actual practice, user has to grope about for the best 
      setting.
    </para>
    <para lang="fr">
      Ces options font appel à des notions que seuls les mathématiciens 
      peuvent comprendre. En pratique, l'utilisateur doit tâtonner pour 
      trouver le meilleur réglage.
    </para>
    
    <variablelist>
      <varlistentry>
        <term>
          <phrase lang="en">Level</phrase>
          <phrase lang="fr">Répartition</phrase>
        </term>
        <listitem>
          <para lang="en">
            Here is what the plug-in author writes on his site 
            (wwww-prima.inrialpes.fr/pelisson/MSRCR.php): "To characterize 
            color variations and the lightor, we make a difference between 
            (gaussian) filters responses at different scales. These 
            parameters allow to specify how to allocate scale values 
            between min scale (sigma 2.0) and max (sigma equal to the 
            image size)"...
            <itemizedlist>
              <listitem>
                <para>
                  <guilabel>Uniform</guilabel>:  FIXME
                </para>
              </listitem>
              <listitem>
                <para>
                  <guilabel>Low</guilabel>: FIXME
                </para>
              </listitem>
              <listitem>
                <para>
                  <guilabel>High</guilabel>: FIXME
                </para>
              </listitem>
            </itemizedlist>
          </para>
          
          <para lang="fr">
            Voici ce que dit l'auteur du greffon sur son site 
            (wwww-prima.inrialpes.fr/pelisson/MSRCR.php): «Pour 
            caractériser les variations de couleurs et l'illuminant on 
            effectue une différence d'intensité entre les réponses des 
            filtres (gaussien) à différentes échelles. Ces paramètres 
            permetttent de spécifier comment sont réparties les valeurs 
            d'échelle entre l'échelle min (sigma 2.0) et max (sigma égal à 
            la taille de l'image)»...
            <itemizedlist>
              <listitem>
                <para>
                  <guilabel>Uniforme</guilabel>:  À RÉDIGER
                </para>
              </listitem>
              <listitem>
                <para>
                  <guilabel>Faible</guilabel>: À RÉDIGER
                </para>
              </listitem>
              <listitem>
                <para>
                  <guilabel>Hauteur</guilabel>: À RÉDIGER
                </para>
              </listitem>
            </itemizedlist>
          </para>
        </listitem>
      </varlistentry>
      
      <varlistentry>
        <term>
          <phrase lang="en">Scale</phrase>
          <phrase lang="fr">Echelle du filtre</phrase>
        </term>
        <listitem>
          <para lang="en">
            FIXME
          </para>
          
          <para lang="fr">
            À RÉDIGER
          </para>
        </listitem>
      </varlistentry>
      
      <varlistentry>
        <term>
          <phrase lang="en">Scale division</phrase>
          <phrase lang="fr">Nombre de coeff.</phrase>
        </term>
        <listitem>
          <para lang="en">
            FIXME
          </para>
          
          <para lang="fr">
            À RÉDIGER
          </para>
        </listitem>
      </varlistentry>
      
      <varlistentry>
        <term>
          <phrase lang="en">Dynamic</phrase>
          <phrase lang="fr">Dynamique</phrase>
        </term>
        <listitem>
          <para lang="en">
            As the MSR algorithm tends to make image lighter, this slider 
            allows you to set color saturation.
          </para>
          
          <para lang="fr">
            Comme l'algorithme MSR a tendance à éclaircir l'image, ce 
            curseur vous permettra de faire varier la saturation des 
            couleurs.
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
    
    <figure>
      <title>
        <phrase lang="en"><quote>Retinex</quote> example</phrase>
        <phrase lang="fr">Exemple de «Normalisation Retinex»</phrase>
      </title>
      <mediaobject>
        <imageobject>
          <imagedata fileref="../images/filters/examples/colors-retinex1.png"
                   format="PNG"/>
        </imageobject> 
      </mediaobject>
      <mediaobject>     
        <imageobject>
          <imagedata fileref="../images/filters/examples/colors-retinex2.png"
                   format="PNG"/>
        </imageobject>      
        <caption>
          <para lang="en">
            Note new details in the upper right corner.
          </para>
          <para lang="fr">
            Noter l'apparition de nouveaux détails dans le coin en haut à 
            droite.
          </para>
        </caption>
      </mediaobject>
    </figure>
  </sect3>
</sect2>
