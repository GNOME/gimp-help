<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect2 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
                       "http://www.docbook.org/xml/4.3/docbookx.dtd">
<!-- section history:
  2017-01-29 desaturate moved to Colors/Desaturate, changed id to plug-in-desaturate
  2009-04-11 ude: changed id (gimp-layer-desaturate -> gimp-tool-desaturate)
  2009-03-12 j.h: moved from menus:colors/. revised for v2.6
  2008-01-21 ude: updated de; added equations
  2007-12-31 j.h updated to v2.4. Options added en;fr
  2007-10-16 ude: copied here from "menus/layer-desaturate.xml"
  2007-06-6 Added Spanish translation by AntI
  2007-02-22 KoSt: added no
  2005/11/12 split of from layer-colors.xml by axel.wernicke
-->
<sect2 id="plug-in-desaturate">
  <title>Desaturate</title>
  <indexterm>
    <primary>Colors</primary>
    <secondary>Desaturate</secondary>
    <tertiary>Desaturate</tertiary>
  </indexterm>
  <indexterm>
    <primary>Desaturate</primary>
  </indexterm>
  <para>
    By using the <guimenuitem>Desaturate</guimenuitem> command, you can
    convert all of the colors on the active layer to corresponding shades
    of gray. This differs from converting the image to grayscale in two
    respects. First, it only operates on the active layer and second,
    the colors on the layer are still RGB values with three components. This
    means that you can paint on the layer, or individual parts of it,
    using color at a later time.
  </para>

  <note>
    <para>
      This command only works on layers of
      <link linkend="glossary-rgb">RGB</link> images. If the image is in
      Grayscale or Indexed mode, it can do nothing.
    </para>
  </note>

  <sect3>
    <title>Activating the Command</title>
    <para>You can find this command through 
      <menuchoice>
        <guimenu>Colors</guimenu>
        <guisubmenu>Desaturate</guisubmenu>
        <guimenuitem>Desaturateâ€¦</guimenuitem>
      </menuchoice>
    </para>
   </sect3>

  <sect3>
    <title>Options</title>
    <figure>
      <title>The <quote>Desaturate</quote> option dialog</title>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/menus/colors/desaturate/desaturate.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>Three options are available:</para>
    <variablelist>
      <title>Choose shade of gray based on</title>
      <varlistentry>
        <term>Lightness</term>
        <listitem>
          <para>The graylevel will be calculated as</para>
          <informalequation>
            <mediaobject>
              <textobject>
                <phrase>
                  Lightness = &frac12; &times; (max(R,G,B) + min(R,G,B))
                </phrase>
              </textobject>
            </mediaobject>
          </informalequation>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Luma</term>
        <listitem>
          <para>The graylevel will be calculated as</para>
          <informalequation>
            <mediaobject>
              <textobject>
                <phrase>
                  Luma = 0.21 &times; R + 0.72 &times; G + 0.07 &times; B
                </phrase>
              </textobject>
            </mediaobject>
          </informalequation>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Average</term>
        <listitem>
          <para>The graylevel will be calculated as</para>
          <informalequation>
            <mediaobject>
              <textobject>
                <phrase>Average Brightness = (R + G + B) &divide; 3</phrase>
              </textobject>
            </mediaobject>
          </informalequation>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Luminance</term>
        <listitem>
          <para>The graylevel will be calculated as</para>
          <informalequation>
            <mediaobject>
              <textobject>
                <phrase>
                  Luminance = 0.21 &times; R +
                               0.72 &times; G +
                               0.07 &times; B
                </phrase>
              </textobject>
            </mediaobject>
          </informalequation>
        </listitem>
      </varlistentry>
    </variablelist>
    <figure>
      <title>Comparing the three options</title>
      <mediaobject>
        <imageobject>
          <!--was: "images/menus/sunflower.png"-->
          <imagedata format="PNG"
            fileref="images/toolbox/colors-desaturate-orig.png"/>
        </imageobject>
        <caption>
          <para>Original image</para>
        </caption>
      </mediaobject>
      <mediaobject>
        <imageobject>
          <imagedata format="PNG"
            fileref="images/toolbox/colors-desaturate-brightness.png"/>
        </imageobject>
        <caption>
          <para><quote>Lightness</quote> applied</para>
        </caption>
      </mediaobject>
      <mediaobject>
        <imageobject>
          <imagedata format="PNG"
            fileref="images/toolbox/colors-desaturate-luminosity.png"/>
        </imageobject>
        <caption>
          <para>
            <quote>Luma</quote> applied.
            <!-- The result is brighter. -->
          </para>
        </caption>
      </mediaobject>
      <mediaobject>
        <imageobject>
          <imagedata format="PNG"
            fileref="images/toolbox/colors-desaturate-average.png"/>
        </imageobject>
        <caption>
          <para>
            <quote>Average</quote> applied.
            <!-- The result is in between Brightness and Luminosity. -->
          </para>
        </caption>
      </mediaobject>
<!--  Find out what Luminance and Luma really do
      <mediaobject>
        <imageobject>
          <imagedata format="PNG"
            fileref="images/toolbox/colors-desaturate-luminance.png"/>
        </imageobject>
        <caption>
          <para>
            <quote>Luminance</quote> applied.
          </para>
        </caption>
      </mediaobject>
-->
      <!-- XXX:
        The conclusions above are true only for this special example;
        e.g. try
        lightness vs. luminosity with (0, 255, 0) or (0, 0, 255),
        lightness vs. average with (255, 255, 0) or (255, 0, 0).
      -->
    </figure>
  </sect3>
</sect2>
