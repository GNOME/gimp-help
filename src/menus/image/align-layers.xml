<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect2 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
                       "http://www.docbook.org/xml/4.3/docbookx.dtd">
<!-- section history:
  2007-11-30 j.h: updated en;fr for v2.4. Moved from layer menu to image
             menu
  2007-06-18 Added Spanish translation by AntI
  2007-03-12 Kolbjørn: added no translation
  2006-07-31 scb: revised 'en'
-->
<sect2 id="plug-in-align-layers">
  <title>Align Visible Layers…</title>

  <indexterm>
    <primary>Layer</primary>
    <secondary>Stack managing</secondary>
    <tertiary>Align visible layers</tertiary>
  </indexterm>
  <indexterm>
    <primary>Align visible layers</primary>
  </indexterm>

  <para>
    With the <guimenuitem>Align Visible Layers</guimenuitem> command,
    you can very precisely position the visible layers (those marked with
    the <quote>eye</quote> icon). This degree of precision is especially
    useful when you are working on animations, which typically have many
    small layers. Clicking on <guimenuitem>Align Visible
      Layers</guimenuitem> displays a dialog which allows you to choose
    how the layers should be aligned.
  </para>
  <sect3>
    <title>Activating the Command</title>
    <itemizedlist>
      <listitem>
        <para>
          You can access this command from the main menu through
          <menuchoice>
            <guimenu>Image</guimenu>
            <guimenuitem>Align Visible Layers…</guimenuitem>
          </menuchoice>.
          There is no default keyboard shortcut. If the image holds a single
          layer only, you get a message from GIMP telling that there must be
          more than one layer in the image to execute the command.
        </para>
      </listitem>
    </itemizedlist>
  </sect3>
  <sect3>
    <title>Example Image for Layer Alignment</title>
    <para>
      The examples in the <link linkend="align-layers-dialog">Description of
      the “Align Visible Layers” dialog</link> section all use the same
      starting image. The image contains four layers. The order of those
      layers from top to bottom is as follows:
      <itemizedlist>
        <listitem>
          <para>
            Green, vertical rectangle (top layer)
          </para>
        </listitem>
        <listitem>
          <para>
            Yellow, horizontal rectangle
          </para>
        </listitem>
        <listitem>
          <para>
            Red, small square
          </para>
        </listitem>
        <listitem>
          <para>
            Blue, larger square (bottom layer)
          </para>
        </listitem>
      </itemizedlist>
    </para>
    <figure>
      <title>Example Image for Layer Alignment</title>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/menus/image/align-demo.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>
      The <guimenuitem>Align Visible Layers</guimenuitem> command aligns layers
      based on their boundaries. In the example image, each layer's boundary is
      adjusted to match the perimeter of the shape in that layer. For
      information about how to adjust a layer's boundary, see
      <link linkend="gimp-layer-resize">Layer Boundary Size</link>. You can
      also use a command such as <link linkend="gimp-layer-crop-to-content">
      Crop Layers to Content</link> to automatically adjust a layer's boundary.
    </para>
    <note>
      <para>
        In the examples, the <guilabel>Ignore the bottom layer even if visible
        </guilabel> checkbox is left checked. The bottom layer, which is the
        larger blue square, is then not affected by any of the alignment
        operations.
      </para>
    </note>
  </sect3>
  <sect3 id="align-layers-dialog">
    <title>
      Description of the <quote>Align Visible Layers</quote> dialog
    </title>
    <figure>
      <title>The <quote>Align Visible Layers</quote> dialog</title>
      <mediaobject>
        <imageobject>
          <imagedata format="PNG"
            fileref="images/menus/image/align-layers.png"/>
        </imageobject>
      </mediaobject>
    </figure>
    <variablelist>
      <varlistentry>
        <term>Horizontal style</term>
        <term>Vertical style</term>
        <listitem>
          <para>
            These options control how the layers should be moved in
            relationship to each other. You can choose:
          </para>
          <itemizedlist>
            <listitem>
              <para>
                <guilabel>None</guilabel>:
                There will be no change in the horizontal or the vertical
                position, respectively.
              </para>
            </listitem>
            <listitem>
              <para>
                <guilabel>Collect</guilabel>:
                The visible layers will be aligned on the canvas, in the
                way that is determined by the <guilabel>Horizontal
                base</guilabel> and <guilabel>Vertical base</guilabel>
                options. If you select a <guilabel>Horizontal
                base</guilabel> of <guilabel>Right edge</guilabel>, layers
                may disappear from the canvas. You can recover them by
                enlarging the canvas. If you check the
                <guilabel>Use the (invisible) bottom layer as the
                base</guilabel> option, the layers will be aligned on the
                top left corner of the bottom layer.
              </para>
              <figure>
                <title>
                  Example Use of Collect: Layers Aligned to Left Edge of the
                  Canvas
                </title>
                <mediaobject>
                  <imageobject>
                    <imagedata format="PNG"
                      fileref="images/menus/image/align-demo-example.png"/>
                  </imageobject>
                  <caption>
                    <para>Original image</para>
                  </caption>
                </mediaobject>
                <mediaobject>
                  <imageobject>
                    <imagedata format="PNG"
                      fileref="images/menus/image/alignHCLB-.png"/>
                  </imageobject>
                  <caption>
                    <para>
                      <guilabel>Horizontal style</guilabel>: <guilabel>Collect
                      </guilabel>, <guilabel>Horizontal base</guilabel>: 
                      <guilabel>Left edge</guilabel>.
                    </para>
                    <para>
                      The layers have been moved horizontally so that their
                      left edges are aligned with the left edge of the
                      canvas.
                    </para>
                  </caption>
                </mediaobject>
              </figure>
              <figure>
                <title>
                  Example Use of Collect: Layers Aligned to Left Edge of the
                  Bottom Layer
                </title>
                <mediaobject>
                  <imageobject>
                    <imagedata format="PNG"
                      fileref="images/menus/image/align-demo-example.png"/>
                  </imageobject>
                  <caption>
                    <para>Original image</para>
                  </caption>
                </mediaobject>
                <mediaobject>
                  <imageobject>
                    <imagedata format="PNG"
                      fileref="images/menus/image/alignHCLB+.png"/>
                  </imageobject>
                  <caption>
                    <para>
                      Same parameters as the previous example, but with the
                      <guilabel>Use the (invisible) bottom layer as the base
                      </guilabel> checkbox checked.
                    </para>
                    <para>
                      The layers have been moved horizontally so that their
                      left edges align with the left edge of the bottom
                      layer.
                    </para>
                  </caption>
                </mediaobject>
              </figure>
            </listitem>
            <listitem>
              <para>
                <guilabel>Fill (left to right)</guilabel>;
                <guilabel>Fill (top to bottom)</guilabel>:
                The visible layers will be arranged left to right (or top to
                bottom) on the canvas according to their order in the layer
                stack. 
              </para>
              <para>
                 The top layer in the stack will be aligned with the layer
                 that currently has the leftmost (or uppermost) position on the
                 canvas. The bottom layer in the stack will be aligned with the
                 layer that currently has the rightmost (or bottommost)
                 position on the canvas. All other visible layers will be
                 evenly distributed between those two positions according to
                 their order in the layer stack.
              </para>
              <para>
                Your choice of <guilabel>Horizontal base</guilabel> (or
                <guilabel>Vertical base</guilabel>) determines how the top and
                bottom layers are aligned with their respective target layers.
                For example, if you choose <guilabel>Right edge</guilabel> as
                the <guilabel>Horizontal base</guilabel>, the right edge of the
                top and bottom layers will be aligned with the right edge of
                their target layers.
              </para>
              <note>
                <para>
                  If the <guilabel>Use the (invisible) bottom layer as the base
                  </guilabel> checkbox is checked, the top layer in the stack
                  will be aligned with the current position of the bottom layer
                  in the stack, instead of the leftmost (or uppermost) layer on
                  the canvas.
                </para>
              </note>
              <figure>
                <title>
                  Example Use of Fill: Layers Filled Left to Right
                </title>
                <mediaobject>
                  <imageobject>
                    <imagedata format="PNG"
                      fileref="images/menus/image/align-demo-example.png"/>
                  </imageobject>
                  <caption>
                    <para>Original image</para>
                  </caption>
                </mediaobject>
                <mediaobject>
                  <imageobject>
                    <imagedata format="PNG"
                      fileref="images/menus/image/alignHFLB-.png"/>
                  </imageobject>
                  <caption>
                    <para>
                      <guilabel>Horizontal style</guilabel>: <guilabel>Fill 
                      (left to right)</guilabel>, <guilabel>Horizontal base
                      </guilabel>: <guilabel>Left edge</guilabel>.
                    </para>
                    <para>
                      The top layer in the stack, the green one, was aligned
                      with the layer that had the leftmost position on the
                      canvas. The bottom layer in the stack, the red one, was
                      aligned with the layer that had the rightmost position on
                      the canvas. The yellow layer is placed between the other
                      two.
                    </para>
                  </caption>
                </mediaobject>
              </figure>
              <figure>
                <title>
                  Example Use of Fill: Layers Filled Left to Right With the
                  Bottom Layer as the Base
                </title>
                <mediaobject>
                  <imageobject>
                    <imagedata format="PNG"
                      fileref="images/menus/image/align-demo-example.png"/>
                  </imageobject>
                  <caption>
                    <para>Original image</para>
                  </caption>
                </mediaobject>
                <mediaobject>
                  <imageobject>
                    <imagedata format="PNG"
                      fileref="images/menus/image/alignHFLB+.png"/>
                  </imageobject>
                  <caption>
                    <para>
                      Same parameters as the previous example, but with the
                      <guilabel>Use the (invisible) bottom layer as the base
                      </guilabel> checkbox checked.
                    </para>
                    <para>
                      The top layer in the stack, the green one, is aligned
                      with the left edge of the base layer. The bottom layer in
                      the stack, the red one, was aligned with the layer that
                      had the rightmost position on the canvas. The yellow
                      layer is placed between the other two.
                    </para>
                  </caption>
                </mediaobject>
              </figure>
            </listitem>
            <listitem>
              <para>
                <guilabel>Fill (right to left)</guilabel>;
                <guilabel>Fill (bottom to top)</guilabel>:
                These settings work similarly to the ones described above,
                but the filling occurs in the opposite direction.
              </para>
              <figure>
                <title>
                  Example Use of Fill: Layers Filled Bottom to Top With the
                  Bottom Layer as the Base
                </title>
                <mediaobject>
                  <imageobject>
                    <imagedata format="PNG"
                      fileref="images/menus/image/align-demo-example.png"/>
                  </imageobject>
                  <caption>
                    <para>Original image</para>
                  </caption>
                </mediaobject>
                <mediaobject>
                  <imageobject>
                    <imagedata format="PNG"
                      fileref="images/menus/image/alignVFBB+.png"/>
                  </imageobject>
                  <caption>
                    <para>
                      <guilabel>Vertical style</guilabel>: <guilabel>Fill
                      (bottom to top)</guilabel>, <guilabel>Vertical base
                      </guilabel>: <guilabel>Top edge</guilabel>, <guilabel>Use
                      the (invisible) bottom layer as the base</guilabel>:
                      checked.
                    </para>
                    <para>
                      The bottom layer in the stack, the red one, is aligned
                      with the top edge of the base layer. The top layer in the
                      stack, the green one, was aligned with the top edge of
                      the of the layer that had the lowest position on the
                      canvas. The yellow layer is placed between the other two.
                    </para>
                  </caption>
                </mediaobject>
              </figure>
              <para>
                There must be at least three visible layers in the image to
                use the <quote>Fill</quote> options.
              </para>
            </listitem>
            <listitem>
              <para>
                <guilabel>Snap to grid</guilabel>:
                  The visible layers will be aligned with a grid. Use the
                  <guilabel>Grid</guilabel> setting to define the spacing of
                  the grid. The base that you select will be aligned with its
                  closest grid line. For example, if you select <guilabel>Left
                  edge</guilabel> from the <guilabel>Horizontal base</guilabel>
                  list, the left edge of each layer will be aligned with the
                  grid line that is closest to the layer's left edge.
              </para>
              <para>
                In the following example, the image
                <link linkend="gimp-concepts-image-grid">grid</link> is turned
                on and its spacing set to the same value as the
                <guilabel>Grid</guilabel> setting. This is only to help
                demonstrate the effect of the <guilabel>Snap to grid</guilabel>
                option. You don't need to turn on the image grid and none of
                its settings are used when you align layers.
              </para>
              <figure>
                <title>
                  Example Use of Snap to Grid: Layers Aligned to Top Left
                  Corner of Grid Squares
                </title>
                <mediaobject>
                  <imageobject>
                    <imagedata format="PNG"
                      fileref="images/menus/image/align-demo-grid.png"/>
                  </imageobject>
                  <caption>
                    <para>Original image with an added 30 pixel image grid
                    </para>
                  </caption>
                </mediaobject>
                <mediaobject>
                  <imageobject>
                    <imagedata format="PNG"
                      fileref="images/menus/image/aligngrid.png"/>
                  </imageobject>
                  <caption>
                    <para>
                      <guilabel>Horizontal style</guilabel>: <guilabel>Snap to
                      grid</guilabel>, <guilabel>Horizontal base</guilabel>:
                      <guilabel>Left edge</guilabel>, <guilabel>Vertical style
                      </guilabel>: <guilabel>Snap to grid</guilabel>,
                      <guilabel>Vertical base</guilabel>: <guilabel>Top edge
                      </guilabel>, <guilabel>Grid</guilabel>: <guilabel>30
                      </guilabel>
                    </para>
                    <para>
                      Each layer other than the base is aligned with the top
                      left corner of a 30 by 30 pixel grid square.
                    </para>
                  </caption>
                </mediaobject>
              </figure>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Grid</term>
        <listitem>
          <para>
            If you choose the <guilabel>Snap to grid</guilabel> option from
            either the <guilabel>Horizontal style</guilabel> or <guilabel>
            Vertical style</guilabel> lists, the <guilabel>Grid</guilabel>
            setting defines the spacing of the grid to which layers are
            aligned.
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect3>
</sect2>
